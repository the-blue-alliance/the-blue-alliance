{% extends "admin/base.html" %}

{% block title %}Home{% endblock %}

{% block head_javascript %}
<!-- We need this here to access the template tags -->
<script type="text/javascript">
$(function () {
    // Build the chart
    $('#graphmemcache').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: '<a href="/admin/cache">Memcache</a>',
            useHTML: true
        },
        tooltip: {
            pointFormat: '<b>{point.y}</b>'
        },
        plotOptions: {
            pie: {
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            type: 'pie',
            name: 'Memcache',
            data: [
                {
                    name: 'Misses',
                    y: {{memcache_stats.misses}},
                    color: '#8B0000'
                },
                {
                    name: 'Hits',
                    y: {{memcache_stats.hits}},
                    color: '#008000'
                }
            ]
        }],
        exporting: {
            enabled: false
        },
        credits: {
            enabled: false
        },
    });

});
</script>
{% endblock %}

{% block content %}

<div class="row">
    <div class="col-xs-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Setup</h3>
            </div>
            <div class="panel-body">
                <p>See the <a href="https://github.com/the-blue-alliance/the-blue-alliance/blob/master/docs/Setup/Setup-Guide-Beta.md">Setup Guide</a> to set up a dev instance.</p>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Stats</h3>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-12">
                        <a href="/suggest/review">
                            <span class="badge pull-right">{{suggestions_count}}</span>
                            Pending Suggestions
                        </a>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div id="graphmemcache" style="width: 100%; height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-6">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">New Users</h3>
            </div>
            <div class="panel-body">
                <table class="table table-striped table-condensed">
                {% for user in users %}
                    <tr>
                        <td><a href="/admin/user/{{user.key.id}}">{{user.display_name}}</a></td>
                        <td>
                            <div class="btn-group pull-right">
                                <a href="/admin/user/edit/{{user.key.id}}" class="btn btn-primary btn-xs"><i class="glyphicon glyphicon-pencil"></i></a>
                                <a href="#" class="btn btn-danger disabled btn-xs"><i class="glyphicon glyphicon-trash"></i></a>
                            </div>
                        </td>
                    </tr>
                {% endfor %}
                </table>
            </div>
        </div>
        <div id="dev-tools-panel" style="display: none;">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">Dev Tools</h3>
                </div>
                <div class="panel-body">
                    <form method="POST" action="/admin/dev/events/seed_test_event">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <button type="submit" class="btn btn-success">Seed Test Event</button>
                        <p class="help-block">Creates "North Pole Regional" with completed, upcoming, and unscheduled matches.</p>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>if (is_local()) document.getElementById('dev-tools-panel').style.display = '';</script>

{% endblock %}

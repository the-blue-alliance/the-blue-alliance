// This file is auto-generated by @hey-api/openapi-ts
import {
  type DefaultError,
  type UseMutationOptions,
  queryOptions,
} from '@tanstack/react-query';
import { client as _heyApiClient } from 'app/api/tba/client/client.gen';
import {
  type Options,
  listFavorites,
  listSubscriptions,
  setModelPreferences,
} from 'app/api/tba/client/sdk.gen';
import type {
  ListFavoritesData,
  ListFavoritesResponse,
  ListSubscriptionsData,
  ListSubscriptionsResponse,
  SetModelPreferencesData,
  SetModelPreferencesResponse,
} from 'app/api/tba/client/types.gen';

export type QueryKey<TOptions extends Options> = [
  Pick<TOptions, 'baseUrl' | 'body' | 'headers' | 'path' | 'query'> & {
    _id: string;
    _infinite?: boolean;
  },
];

const createQueryKey = <TOptions extends Options>(
  id: string,
  options?: TOptions,
  infinite?: boolean,
): [QueryKey<TOptions>[0]] => {
  const params: QueryKey<TOptions>[0] = {
    _id: id,
    baseUrl: (options?.client ?? _heyApiClient).getConfig().baseUrl,
  } as QueryKey<TOptions>[0];
  if (infinite) {
    params._infinite = infinite;
  }
  if (options?.body) {
    params.body = options.body;
  }
  if (options?.headers) {
    params.headers = options.headers;
  }
  if (options?.path) {
    params.path = options.path;
  }
  if (options?.query) {
    params.query = options.query;
  }
  return [params];
};

export const listFavoritesQueryKey = (options?: Options<ListFavoritesData>) =>
  createQueryKey('listFavorites', options);

/**
 * List favorites
 */
export const listFavoritesOptions = (options?: Options<ListFavoritesData>) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await listFavorites({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: listFavoritesQueryKey(options),
  });
};

/**
 * List favorites
 */
export const listFavoritesMutation = (
  options?: Partial<Options<ListFavoritesData>>,
): UseMutationOptions<
  ListFavoritesResponse,
  DefaultError,
  Options<ListFavoritesData>
> => {
  const mutationOptions: UseMutationOptions<
    ListFavoritesResponse,
    DefaultError,
    Options<ListFavoritesData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await listFavorites({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const setModelPreferencesQueryKey = (
  options: Options<SetModelPreferencesData>,
) => createQueryKey('setModelPreferences', options);

/**
 * Set model preferences
 */
export const setModelPreferencesOptions = (
  options: Options<SetModelPreferencesData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await setModelPreferences({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: setModelPreferencesQueryKey(options),
  });
};

/**
 * Set model preferences
 */
export const setModelPreferencesMutation = (
  options?: Partial<Options<SetModelPreferencesData>>,
): UseMutationOptions<
  SetModelPreferencesResponse,
  DefaultError,
  Options<SetModelPreferencesData>
> => {
  const mutationOptions: UseMutationOptions<
    SetModelPreferencesResponse,
    DefaultError,
    Options<SetModelPreferencesData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await setModelPreferences({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};

export const listSubscriptionsQueryKey = (
  options?: Options<ListSubscriptionsData>,
) => createQueryKey('listSubscriptions', options);

/**
 * List subscriptions
 */
export const listSubscriptionsOptions = (
  options?: Options<ListSubscriptionsData>,
) => {
  return queryOptions({
    queryFn: async ({ queryKey, signal }) => {
      const { data } = await listSubscriptions({
        ...options,
        ...queryKey[0],
        signal,
        throwOnError: true,
      });
      return data;
    },
    queryKey: listSubscriptionsQueryKey(options),
  });
};

/**
 * List subscriptions
 */
export const listSubscriptionsMutation = (
  options?: Partial<Options<ListSubscriptionsData>>,
): UseMutationOptions<
  ListSubscriptionsResponse,
  DefaultError,
  Options<ListSubscriptionsData>
> => {
  const mutationOptions: UseMutationOptions<
    ListSubscriptionsResponse,
    DefaultError,
    Options<ListSubscriptionsData>
  > = {
    mutationFn: async (localOptions) => {
      const { data } = await listSubscriptions({
        ...options,
        ...localOptions,
        throwOnError: true,
      });
      return data;
    },
  };
  return mutationOptions;
};
